<div class="container" *ngIf="profile">
  <!-- Header with Change Password button -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0">Edit Profile</h2>
    <button
      class="btn btn-outline-primary d-flex align-items-center gap-2 px-3 py-2"
      (click)="changePassword()"
    >
      <i class="bi bi-shield-lock-fill"></i> Change Password
    </button>
  </div>

  <!-- User Info -->
  <div class="d-flex justify-content-evenly mb-4">
    <app-custom-input
      class="col-4"
      label="Name"
      [(value)]="profile.name"
      [type]="'text'"
    ></app-custom-input>

    <app-custom-input
      class="col-4"
      label="Phone Number"
      [(value)]="profile.phoneNumber"
      [type]="'text'"
    ></app-custom-input>
  </div>

  <!-- Address Section -->
  <div
    *ngFor="let address of profile.addresses; let i = index"
    class="border rounded p-3 mb-3 position-relative"
  >
    <!-- Remove Icon -->
    <button
      type="button"
      class="btn-close position-absolute top-0 end-0 m-2"
      aria-label="Remove"
      (click)="removeAddress(i)"
    ></button>

    <h5>Address {{ i + 1 }}</h5>

    <div class="d-flex justify-content-evenly flex-wrap gap-2">
      <app-custom-input
        class="col-3"
        label="Street"
        [(value)]="address.street"
        [type]="'text'"
        [placeholder]="'Street'"
      ></app-custom-input>

      <app-custom-input
        class="col-3"
        label="State"
        [(value)]="address.state"
        [type]="'text'"
        [placeholder]="'State'"
      ></app-custom-input>

      <app-custom-input
        class="col-3"
        label="Building No."
        [(value)]="address.buildingNumber"
        [type]="'number'"
        [placeholder]="'Building Number'"
      ></app-custom-input>

      <div class="form-check align-self-center mt-2">
        <input
          class="form-check-input"
          type="radio"
          name="defaultAddress"
          [value]="true"
          [(ngModel)]="profile.addresses[i].isDefault"
          (change)="setDefaultAddress(i)"
        />
        <label class="form-check-label">Default</label>
      </div>
    </div>
  </div>

  <!-- Add new address button -->
  <div class="d-flex justify-content-end mb-4">
    <button class="btn btn-outline-success" (click)="addAddress()">
      + Add Address
    </button>
  </div>

  <!-- Buttons -->
  <div class="d-flex justify-content-end gap-3">
    <button class="btn btn-secondary" (click)="cancel()">Cancel</button>
    <button class="btn btn-primary" (click)="updateProfile()">Save</button>
  </div>
</div>
