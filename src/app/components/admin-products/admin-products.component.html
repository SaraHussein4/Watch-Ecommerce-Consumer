<div class="admin-container container-fluid py-4">
  <main class="px-md-4">
    <!-- Filter Controls & Add Product Button -->
    <div
      class="d-flex justify-content-between align-items-center mb-5 flex-wrap gap-3"
    >
      <div class="d-flex gap-3 flex-wrap">
        <!-- Search -->
        <input
          type="text"
          class="form-control custom-input"
          placeholder="Search products..."
          [(ngModel)]="filters.searchTerm"
          (change)="onSearch()"
          style="width: 250px"
        />

        <!-- Category Filter -->
        <select
          class="form-select custom-select"
          style="width: 180px"
          [(ngModel)]="selectedCategoryId"
          (change)="onCategoryChange()"
        >
          <option value="">All Categories</option>
          <option *ngFor="let category of categories" [value]="category.id">
            {{ category.name }}
          </option>
        </select>

        <!-- Brand Filter -->
        <select
          class="form-select custom-select"
          style="width: 180px"
          [(ngModel)]="selectedBrandId"
          (change)="onBrandChange()"
        >
          <option value="">All Brands</option>
          <option *ngFor="let brand of brands" [value]="brand.id">
            {{ brand.name }}
          </option>
        </select>
      </div>

      <!-- Add Product Button -->
      <button [routerLink]="['/admin/addProduct']" class="btn btn-add-product">
        + Add New Product
      </button>
    </div>

    <!-- Product Cards -->
    <div class="row g-4">
      <div class="col-lg-4 col-md-6" *ngFor="let product of products">
        <app-Product-Card
          [product]="product"
          [isAdmin]="true"
          (productDeleted)="onProductDeleted($event)"
        ></app-Product-Card>
      </div>
    </div>

    <!-- Pagination -->
    <nav *ngIf="totalCount > filters.pageSize">
      <ul class="pagination justify-content-center mt-4">
        <li class="page-item" [class.disabled]="filters.page === 1">
          <button class="page-link" (click)="onPageChange(filters.page - 1)">
            Previous
          </button>
        </li>
        <li
          class="page-item"
          *ngFor="let p of pageNumbers"
          [class.active]="filters.page === p"
        >
          <button class="page-link" (click)="onPageChange(p)">{{ p }}</button>
        </li>
        <li
          class="page-item"
          [class.disabled]="filters.page === pageNumbers.length"
        >
          <button class="page-link" (click)="onPageChange(filters.page + 1)">
            Next
          </button>
        </li>
      </ul>
    </nav>
  </main>
</div>
