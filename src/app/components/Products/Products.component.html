<div class="container-fluid products">
  <div class="row">
    <!-- Filters Sidebar (Left) -->
    <div class="col-md-3">
      <div class="filter-section sticky-top">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h4>Filters</h4>
          <button class="btn btn-outline-secondary" (click)="resetFilters()">
            Reset
          </button>
        </div>

        <!-- Search -->
        <div class="mb-4">
          <label class="form-label">Search</label>
          <div class="input-group">
            <input
              type="text"
              class="form-control"
              placeholder="Search..."
              [(ngModel)]="filters.searchTerm"
              (keyup.enter)="onSearch()"
            />
            <button
              class="btn btn-outline-secondary"
              type="button"
              (click)="onSearch()"
            >
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>
          </div>
        </div>

        <!-- Sort By -->
        <div class="mb-4">
          <label class="form-label">Sort By</label>
          <select
            class="form-select"
            [(ngModel)]="filters.sortBy"
            (change)="onSortChange()"
          >
            <option value="newest" selected>New Arrivals</option>
            <option value="priceLowToHigh">Price: Low to High</option>
            <option value="priceHighToLow">Price: High to Low</option>
          </select>
        </div>

        <!-- Gender -->
        <div class="mb-4">
          <label class="form-label">Gender</label>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              id="male"
              [(ngModel)]="maleChecked"
              (change)="onGenderChange()"
            />
            <label class="form-check-label" for="male">Male</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              id="female"
              [(ngModel)]="femaleChecked"
              (change)="onGenderChange()"
            />
            <label class="form-check-label" for="female">Female</label>
          </div>
        </div>

        <!-- Category -->
        <div class="mb-4">
          <label for="categorySelect" class="form-label">Category</label>
          <select
            class="form-select"
            id="categorySelect"
            [(ngModel)]="selectedCategoryId"
            (change)="onCategoryChange()"
          >
            <option value="" selected>All categories</option>
            <option *ngFor="let category of categories" [value]="category.id">
              {{ category.name }}
            </option>
          </select>
        </div>

        <!-- Brand -->
        <div class="mb-4">
          <label for="brandSelect" class="form-label">Brands</label>
          <select
            class="form-select"
            id="brandSelect"
            [(ngModel)]="selectedBrandId"
            (change)="onBrandChange()"
          >
            <option value="" selected>All Brands</option>
            <option *ngFor="let brand of brands" [value]="brand.id">
              {{ brand.name }}
            </option>
          </select>
        </div>
      </div>
    </div>

    <div class="col-md-9">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h4>Our Products</h4>
      </div>

      <div class="row">
        <div class="col-lg-3 col-md-6" *ngFor="let product of products" style="margin-bottom: 30px;">
          <app-Product-Card  [product]="product"></app-Product-Card>
        </div>
      </div>
              <nav *ngIf="totalCount > filters.pageSize">
          <ul class="pagination justify-content-center mt-4">
            <li class="page-item" [class.disabled]="filters.page === 1">
              <button class="page-link" (click)="onPageChange(filters.page - 1)">
                Previous
              </button>
            </li>

            <li
              class="page-item"
              *ngFor="let p of pageNumbers"
              [class.active]="filters.page === p"
            >
              <button class="page-link" (click)="onPageChange(p)">
                {{ p }}
              </button>
            </li>

            <li class="page-item" [class.disabled]="filters.page === pageNumbers.length">
              <button class="page-link" (click)="onPageChange(filters.page + 1)">
                Next
              </button>
            </li>
          </ul>
        </nav>
    </div>
  </div>
</div>
