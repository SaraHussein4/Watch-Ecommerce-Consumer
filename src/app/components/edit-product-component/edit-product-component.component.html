<div class="container mt-5" >
  <h1><strong>Edit Product</strong></h1>
  <h2 class="mt-5 mb-4">Product Information</h2>
<form [formGroup]="editProductForm" (ngSubmit)="onSubmit()">
  <div class="mt-3">
    <label class="mb-1">Product Name:</label>
    <div></div>
    <input class="myInput" type="text" formControlName="name" />
  </div>

  <div class="mt-3">
    <label class="mb-1">Description:</label>
    <div></div>
    <textarea class="myInputDescription" type="text" formControlName="description" ></textarea>
  </div>

  <div class="mt-3">
    <label class="mb-1">Price:</label>
    <div></div>
    <input class="myInput" type="number" formControlName="price" />
  </div>

  <div class="mt-3">
    <label class="mb-1">Quantity:</label>
    <div></div>
    <input class="myInput" type="number" formControlName="quantity" />
  </div>

  <div class="mt-3">
    <label class="mb-1">Status:</label>
    <div></div>
    <input class="myInput" type="text" formControlName="status" />
  </div>

  <div class="mt-3" style="display: flex; align-items: center;">
    <label class="mb-1" style="margin-right: 10px;">Gender Category:</label>
    <select class="gender" formControlName="genderCategory">
      <option value="Male">Male</option>
      <option value="Female">Female</option>
    </select>

  </div>


  <div class="mt-3" style="display: flex; align-items: center;">
    <label class="mb-1" style="margin-right: 10px;">Water Resistance:</label>
    <input class="t" type="checkbox" formControlName="waterResistance" />
    <span style="margin-left: 5px; font-weight: 600;">Water Resistance</span>
  </div>


  <div class="mt-3">
    <label class="mb-1">Warranty Years:</label>
    <input class="myInput" type="number" formControlName="warrentyYears" />
  </div>

  <div class="mt-3">
    <label class="mb-1">Colors:</label>
    <div style="display: grid; grid-template-columns: repeat(4,80px); gap: 2px; font-weight: 650;">
    <div *ngFor="let color of availableColors">

      <input type="checkbox"  [checked]="selectedColors.includes(color)" (change)="toggleColor(color)">
      {{color}}
    </div>
  </div>
  </div>
  <div class="mt-3">
    <label class="mb-1">Sizes:</label>
    <div style="display: grid; grid-template-columns: repeat(4,80px); gap: 2px; font-weight: 650;">
    <div *ngFor="let size of availableSizes">
      <input  type="checkbox" [checked]="selectSizes.includes(size)" (change)="toggleSize(size)">
      {{size}}
    </div>
  </div>
  </div>
  <div class="mt-3">
    <label class="mb-1">Category:</label>
    <select formControlName="categoryId" class="form-control">
      <option *ngFor="let cat of categories" [value]="cat.id">
        {{cat.name}}
      </option>
    </select>
  </div>

  <div class="mt-3">
    <label class="mb-1">Brand:</label>
    <select formControlName="productBrandId" class="form-control">
      <option *ngFor="let brd of brands" [value]="brd.id">
        {{brd.name}}
      </option>
    </select>
  </div>
  <div class="mt-3">
    <div *ngIf="product?.images && product.images.length > 0">
      <label class="mb-1">Product Images:</label>
      <div style="display: flex; flex-wrap: wrap; gap: 10px;">
        <div *ngFor="let img of product.images" style="position: relative; margin-bottom:10px; width: calc(40% - 10px);">
          <!-- <div *ngFor="let img of product.images">
            {{ img | json }}
          </div> -->
          <img [src]="'https://localhost:7071' + img.url" alt="Product Image" style="width: 60%; border-radius: 8px;">
          <button type="button" (click)="deleteImage(img.id)"
            style="position: absolute; top: 5px;  border: none; background: transparent; cursor: pointer;">
            <i class="fa fa-trash" style="color: red; font-size: 18px;"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

<div class="mb-3">
  <label for="imageUpload" class="form-label fw-semibold">Add New Images:</label>
  <input type="file" id="imageUpload" (change)="onImageSelected($event)" multiple class="form-control"
    accept="image/*" />
</div>

<div class="d-flex justify-content-end">
  <button type="button" class="btn btn-primary" (click)="uploadImages()">
    Add New Images
  </button>
</div>


<div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 40px; margin-bottom: 40px;">
  <button type="submit" class="btn btn-primary rounded-5">Update Product</button>
  <button type="button" class="btn btn-primary rounded-5" (click)="onCancel()">Cancel</button>
</div>

</form>
</div>
